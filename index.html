<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Holiday Coverage Poll</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Poll Voting View (shown when ?vote is in URL) -->
    <div id="voteView" class="container hidden">
        <header>
            <h1>üéÑ Holiday Coverage Poll</h1>
            <p class="subtitle">Engineering Team ‚Ä¢ 2025-2026</p>
        </header>

        <main>
            <section class="info-section">
                <div class="info-card">
                    <h3>Coverage Hours</h3>
                    <p>7am - 6pm CST</p>
                </div>
                <div class="info-card">
                    <h3>Total Days</h3>
                    <p>12 days (1 per person)</p>
                </div>
                <div class="info-card">
                    <h3>Requirement</h3>
                    <p>Reachable via phone, email, or Teams</p>
                </div>
            </section>

            <section class="note-section">
                <p><strong>Note:</strong> Thanksgiving Day (Nov 27), Christmas Day (Dec 25), and New Year's Eve (Dec 31) fall back to whoever holds the support phone that day (check SharePoint calendar https://sharepoint.ins.healthcareintel.com/engineering/SitePages/Home.aspx).</p>
                <p style="margin-top: 10px;"><strong>Your coverage day hours:</strong> 7am - 6pm CST. You don't have to stay online all day ‚Äî just be available to match with support during these hours. Once 6pm CST hits on your coverage day, the support phone falls back to whoever's week it originally is on Sharepoint.</p>
            </section>

            <section class="voting-legend">
                <h3>How to vote:</h3>
                <div class="legend-items">
                    <div class="legend-item">
                        <div class="vote-box vote-yes"></div>
                        <span><strong>One click:</strong> I'd really prefer this/these days</span>
                    </div>
                    <div class="legend-item">
                        <div class="vote-box vote-maybe"></div>
                        <span><strong>Two clicks:</strong> These days work too I guess</span>
                    </div>
                    <div class="legend-item">
                        <div class="vote-box vote-no"></div>
                        <span><strong>Three clicks:</strong> No (back to default)</span>
                    </div>
                </div>
            </section>

            <form id="voteForm">
                <section class="voter-info">
                    <h3>Your Information</h3>
                    <div class="form-group">
                        <label for="voterName">Your Name</label>
                        <select id="voterName" required>
                            <option value="">-- Select your name --</option>
                            <option value="Matt">Matt</option>
                            <option value="Robert">Robert</option>
                            <option value="Gerald">Gerald</option>
                            <option value="Ellie">Ellie</option>
                            <option value="Chris S">Chris S</option>
                            <option value="Eri">Eri</option>
                            <option value="Joe">Joe</option>
                            <option value="Jeremy">Jeremy</option>
                            <option value="Jud">Jud</option>
                            <option value="Emil">Emil</option>
                            <option value="Chris E">Chris E</option>
                            <option value="Jason">Jason</option>
                        </select>
                    </div>
                </section>

                <section class="poll-section">
                    <!-- Thanksgiving Week -->
                    <div class="week-block">
                        <h2>Thanksgiving Week</h2>
                        <p class="week-dates">Nov 24-28, 2025</p>
                        <div class="poll-grid">
                            <div class="poll-day">
                                <div class="day-header">Monday<br><span class="date">Nov 24</span></div>
                                <div class="vote-cell" data-day="mon-nov-24">
                                    <div class="vote-box"></div>
                                </div>
                            </div>
                            <div class="poll-day">
                                <div class="day-header">Tuesday<br><span class="date">Nov 25</span></div>
                                <div class="vote-cell" data-day="tue-nov-25">
                                    <div class="vote-box"></div>
                                </div>
                            </div>
                            <div class="poll-day">
                                <div class="day-header">Wednesday<br><span class="date">Nov 26</span></div>
                                <div class="vote-cell" data-day="wed-nov-26">
                                    <div class="vote-box"></div>
                                </div>
                            </div>
                            <div class="poll-day excluded">
                                <div class="day-header">Thursday<br><span class="date">Nov 27</span></div>
                                <div class="vote-cell">
                                    <div class="excluded-notice">Support Phone</div>
                                </div>
                            </div>
                            <div class="poll-day">
                                <div class="day-header">Friday<br><span class="date">Nov 28</span></div>
                                <div class="vote-cell" data-day="fri-nov-28">
                                    <div class="vote-box"></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Christmas Week -->
                    <div class="week-block">
                        <h2>Christmas Week</h2>
                        <p class="week-dates">Dec 22-26, 2025</p>
                        <div class="poll-grid">
                            <div class="poll-day">
                                <div class="day-header">Monday<br><span class="date">Dec 22</span></div>
                                <div class="vote-cell" data-day="mon-dec-22">
                                    <div class="vote-box"></div>
                                </div>
                            </div>
                            <div class="poll-day">
                                <div class="day-header">Tuesday<br><span class="date">Dec 23</span></div>
                                <div class="vote-cell" data-day="tue-dec-23">
                                    <div class="vote-box"></div>
                                </div>
                            </div>
                            <div class="poll-day">
                                <div class="day-header">Wednesday<br><span class="date">Dec 24</span></div>
                                <div class="vote-cell" data-day="wed-dec-24">
                                    <div class="vote-box"></div>
                                </div>
                            </div>
                            <div class="poll-day excluded">
                                <div class="day-header">Thursday<br><span class="date">Dec 25</span></div>
                                <div class="vote-cell">
                                    <div class="excluded-notice">Support Phone</div>
                                </div>
                            </div>
                            <div class="poll-day">
                                <div class="day-header">Friday<br><span class="date">Dec 26</span></div>
                                <div class="vote-cell" data-day="fri-dec-26">
                                    <div class="vote-box"></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- New Year Week -->
                    <div class="week-block">
                        <h2>New Year Week</h2>
                        <p class="week-dates">Dec 29, 2025 - Jan 2, 2026</p>
                        <div class="poll-grid">
                            <div class="poll-day">
                                <div class="day-header">Monday<br><span class="date">Dec 29</span></div>
                                <div class="vote-cell" data-day="mon-dec-29">
                                    <div class="vote-box"></div>
                                </div>
                            </div>
                            <div class="poll-day">
                                <div class="day-header">Tuesday<br><span class="date">Dec 30</span></div>
                                <div class="vote-cell" data-day="tue-dec-30">
                                    <div class="vote-box"></div>
                                </div>
                            </div>
                            <div class="poll-day excluded">
                                <div class="day-header">Wednesday<br><span class="date">Dec 31</span></div>
                                <div class="vote-cell">
                                    <div class="excluded-notice">Support Phone</div>
                                </div>
                            </div>
                            <div class="poll-day">
                                <div class="day-header">Thursday<br><span class="date">Jan 1</span></div>
                                <div class="vote-cell" data-day="thu-jan-01">
                                    <div class="vote-box"></div>
                                </div>
                            </div>
                            <div class="poll-day">
                                <div class="day-header">Friday<br><span class="date">Jan 2</span></div>
                                <div class="vote-cell" data-day="fri-jan-02">
                                    <div class="vote-box"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <section class="actions-section">
                    <button type="submit" class="btn btn-primary">Submit Vote</button>
                </section>
            </form>
        </main>

        <footer>
            <p>Be available via phone, email, or Teams during your selected coverage day (7am-6pm CST)</p>
        </footer>
    </div>

    <!-- Results View (admin/default view) -->
    <div id="resultsView" class="container">
        <header>
            <h1>üéÑ Holiday Coverage Poll Results</h1>
            <p class="subtitle">Engineering Team ‚Ä¢ 2025-2026</p>
        </header>

        <main>
            <section class="actions-section">
                <button id="shareLink" class="btn btn-primary">üìã Copy Poll Link</button>
                <button id="exportResults" class="btn btn-secondary">Export Results</button>
            </section>

            <section class="note-section">
                <p><strong>Legend:</strong>
                    <span class="vote-badge vote-yes-badge">‚óè</span> Yes
                    <span class="vote-badge vote-maybe-badge">‚óè</span> If needed
                    <span class="vote-badge vote-no-badge">‚óã</span> No response
                </p>
            </section>

            <section class="results-section">
                <div id="resultsTable"></div>
            </section>
        </main>

        <footer>
            <p>Send the poll link to team members to collect their availability</p>
        </footer>
    </div>

    <!-- Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js"></script>

    <script src="app.js"></script>
</body>
</html>
